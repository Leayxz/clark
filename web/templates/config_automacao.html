{% extends "layout.html" %}
{% load static %}

{% block title %} Clark {% endblock %}

{% block main %}
<link rel = "stylesheet" href = "{% static 'config_automacao.css' %}">

      <div class="container_automacao">
            {% if config.id_task %} <p class = "rodando"> üü¢ Sess√£o rodando! </p> {% else %} <p class = "rodando"> üî¥ Sess√£o parada! </p> {% endif %}
            <form class="form_esquerdo" action="{% url 'config_automacao' %}" method="POST"> {% csrf_token %}

                  <h1> Configure Sua Automa√ß√£o </h1>
                  
                  <div class="div_funcoes">
                        <div class="funcoes_esquerda">
                              <label> Pre√ßo De Refer√™ncia: <input type = "number" name = "preco_referencia" value = "{{ config.preco_referencia|floatformat:0 }}" {% if id_task %} readonly {% endif %} required> </label>
                              <label> Lucro Esperado (%): <input type = "number" name = "percentual_lucro" min = "0" step = "0.1"  value = "{{ config.percentual_lucro|floatformat:1 }}" required> </label>
                              <label> Varia√ß√£o De Compra ($): <input type = "number" name = "variacao_compra" min = "0" value = "{{ config.variacao_compra }}" required> </label>
                        </div>

                        <div class="funcoes_direita">
                              <label> Comprar Abaixo ($): <input type="number" name="comprar_abaixo" value="{{ config.comprar_abaixo|default:126000|floatformat:0 }}" required> </label>
                              <label> Limite De Compra ($): <input type = "number" name = "limite_margem" value = "{{ config.limite_margem }}" required> </label>
                              <label> Prote√ß√£o De Liquida√ß√£o (%): <input type = "number" name = "percentual_seguranca_liquidacao" value = "{{ config.percentual_seguranca_liquidacao|floatformat:0 }}" readonly> </label>
                        </div>                        
                  </div>

                  <div class="quantity">
                        <label> Quantity ($): <input type = "number" name = "quantity1" min="10" value = "{{ config.quantity1|default:10 }}" required> </label>
                        <label> Quantity ($): <input type = "number" name = "quantity2" min="10" value = "{{ config.quantity2|default:10 }}" required> </label>
                        <label> Quantity ($): <input type = "number" name = "quantity3" min="10" value = "{{ config.quantity3|default:10 }}" required> </label>
                        <label> Quantity ($): <input type = "number" name = "quantity4" min="10" value = "{{ config.quantity4|default:10 }}" required> </label>
                  </div>

                  <div class="ranges">
                        <p class="range1"> +115 </p>
                        <p class="range2"> 110-115 </p>
                        <p class="range3"> 105-110 </p>
                        <p class="range4"> -105 </p>
                  </div>

                  <button class="botao" type="submit" onclick="this.textContent='Processando...'"> Salvar Configura√ß√µes </button>
            </form>

            <form class="form_direito" action="{% url 'ligar_desligar_automacao' %}" method="POST"> {% csrf_token %}
                  <h1> Conex√£o API </h1>
                  <label> API Key: <input type = "text" name="API_KEY" value="{{ config.api_key }}" placeholder="Cole Sua API KEY" {% if not id_task %} required {% endif %}>   </label>
                  <label> Secret Key:  <input type = "text" name = "SECRET_KEY" value="{{ config.secret_key }}" placeholder="Cole Sua SECRET KEY" {% if not id_task %} required {% endif %}> </label>

                  <button class="botao" type = "submit"> {% if config.id_task %} Desligar Automa√ß√£o {% else %} Ligar Automa√ß√£o {% endif %} </button>
                  <a class="botao" href = "{% url 'pagina_inicial' %}"> P√°gina Inicial </a> <br>
            </form>
      </div>

{% endblock %}
